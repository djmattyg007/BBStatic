#!/usr/bin/env php
<?php
declare(strict_types=1);

cli_set_process_title("bbstatic");

$composer = require(dirname(__DIR__) . "/vendor/autoload.php");
if (class_exists("\MattyG\AutoCodeLoader\Autoloader") === true) {
    \MattyG\AutoCodeLoader\Autoloader::registerAutoloader(dirname(__DIR__) . "/var/classes");
} else {
    $composer->addPsr4("", dirname(__DIR__) . "/var/classes");
}

use MattyG\BBStatic;
use Webmozart\Console\ConsoleApplication;

$di = (new BBStatic\DiConfig($config))->createContainer();
$cliConfig = new BBStatic\Cli\Config();
$cliConfig->setDiContainer($di);
$cliConfig->addCommands();

$app = new ConsoleApplication($cliConfig);
$app->run();
